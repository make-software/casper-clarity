FROM node:12.5.0-stretch-slim

ARG NODE_ENV=production
ENV NODE_ENV=$NODE_ENV

ARG DATABASE_URI
ENV DATABASE_URI=$DATABASE_URI

ARG NODE_ADDRESS=127.0.0.1
ENV NODE_ADDRESS=$NODE_ADDRESS

ARG API_VERSION=1.0.0
ENV API_VERSION=$API_VERSION

WORKDIR /app

COPY src /app/src
COPY config /app/config
COPY db /app/db
COPY package.json /app/package.json

RUN npm install

ENTRYPOINT npm run start-event-handler